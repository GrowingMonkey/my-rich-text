webpackJsonp([1],{"0Apa":function(t,e){},"4ml/":function(t,e){},BwLy:function(t,e){},CepZ:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("7+uW"),i=n("mvHQ"),a=n.n(i),r={name:"loginUser",props:["pro"],data:function(){return{phonenumber:"",code:""}},methods:{tokenGet:function(){var t=navigator.userAgent,e=t.indexOf("Android")>-1||t.indexOf("Adr")>-1;t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);if(e){var n=window.dove.getToken();alert(n)}else alert(window.localStorage.getItem("b"))},returnPage:function(){alert("comming");var t=navigator.userAgent,e=t.indexOf("Android")>-1||t.indexOf("Adr")>-1;t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);e?window.dove.closePage():window.webkit.messageHandlers.closePage.postMessage("这是前端传值")},logined:function(){var t=this,e={code:t.code};this.$post("/system/login",e).then(function(e){console.log(e),0==e.code&&t.$emit("success",!0),window.localStorage.setItem("userinfo",a()(e.data))})},sendCode:function(){this.phonenumber}},mounted:function(){window.localStorage.getItem("token")||this.$fetch("/system/getToken").then(function(t){console.log(t),0==t.code&&window.localStorage.setItem("token",t.data.token)})}},s={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login-box"},[n("div",{staticClass:"user"},[n("label",{attrs:{for:""}},[t._v("用户")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.phonenumber,expression:"phonenumber"}],attrs:{type:"text"},domProps:{value:t.phonenumber},on:{input:function(e){e.target.composing||(t.phonenumber=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"password"},[n("label",{attrs:{for:""}},[t._v("验证码")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],attrs:{type:"text"},domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value)}}}),t._v(" "),n("button",{on:{click:t.sendCode}},[t._v("发送验证码")])]),t._v(" "),n("div",[n("button",{on:{click:t.logined}},[t._v("登录")]),t._v(" "),n("button",{on:{click:t.returnPage}},[t._v("返回")]),t._v(" "),n("button",{on:{click:t.tokenGet}},[t._v("获取token")])])])},staticRenderFns:[]};var l=n("VU/8")(r,s,!1,function(t){n("BwLy")},"data-v-0f639420",null).exports,c=n("woOf"),d=n.n(c),u=n("d7EF"),p=n.n(u),g=n("//Fk"),f=n.n(g),h=n("mtWM"),v=n.n(h),m=n("Fd2+"),w={name:"editDiv",props:{value:{type:String,default:""},canEdit:{type:Boolean,default:!0},onOk:{type:Function},isdisable:{type:Boolean}},data:function(){return{originUrl:"http://www.aiyu2019.com",innerText:this.value,isLocked:!1,lastpoint:0,editorRange:null,editorNode:null,selection:"",range:""}},watch:{value:function(){this.isLocked&&this.innerText||(this.innerText=this.value)}},methods:{removeHtmlStyle:function(t){var e="";return t&&(e=t.replace(/style="[^=>]*"([(\s+\w+=)|>])/g,"$1")),e},jumpDraft:function(){this.$router.push({path:"/draftbox"})},saveCaogao:function(){console.log(111),this.isdisable||this.onOk&&this.onOk(!0,2)},clearCaogao:function(){this.onOk&&(this.onOk(!0,"clear"),this.$nextTick(function(){document.getElementById("edit-div").innerHTML="<p><br></p>"}))},_submitForm:function(){this.isdisable||this.onOk&&this.onOk(!0,1)},removeAEvent:function(){var t=this;this.$nextTick(function(){document.querySelector(".edit-div").addEventListener("click",function(e){e.preventDefault(),"A"===e.target.nodeName&&t.$fn.openWindow(e.target.href)})})},point:function(){if(window.getSelection&&this.$refs.edit.focus(),-1==navigator.userAgent.indexOf("Android")&&-1==navigator.userAgent.indexOf("Adr")){var t=getSelection();this.range=t.getRangeAt(0),console.log(this.range)}},uuid:function(){for(var t=[],e=0;e<36;e++)t[e]="56789abcdefghijk".substr(Math.floor(16*Math.random()),1);t[14]="4",t[19]="56789abcdefghijk".substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-";var n=t.join("");return n=n.replace(/[-]/g,""),n},getpublishId:function(){var t=this,e=this;return new f.a(function(n,o){window.localStorage.getItem("publishId")?n({code:0}):t.$post(e.originUrl+"/api/upload/art/publish").then(function(t){t&&0==t.code?(window.localStorage.setItem("publishId",t.data.id),n(t)):n({code:-2,message:"服务端错误"})})})},uploadImg:function(){this.$refs.uploadinput.click()},getOssKey:function(){return this.$post(this.originUrl+"/api/upload/pic/getSTSToken")},get_signature:function(t,e,n){console.log(e);var o=t.accessKeyId,i=t.accessKeySecret,r=t.securityToken,s=t.expiration,l=this,c=t;console.log(c);var d={expiration:s,conditions:[["content-length-range",0,1048576e3]]},u=Base64.encode(a()(d)),p=u;console.log(p),console.log(i);var g=Crypto.HMAC(Crypto.SHA1,p,i,{asBytes:!0});console.log(g);var f=Crypto.util.bytesToBase64(g),h="img/"+l.uuid()+n,w=new FormData;w.append("name",""+e.name),w.append("key",h),w.append("OSSAccessKeyId",o),w.append("x-oss-security-token",r),w.append("policy",u),w.append("Signature",f),w.append("success_action_status","200"),w.append("file",e),v()({url:"https://aiyu-out.oss-cn-hongkong.aliyuncs.com",method:"post",data:w,headers:{"content-type":"multipart/form-data"}}).then(function(t){if(t){var e=null;(e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).open("GET","https://aiyu-out.oss-cn-hongkong.aliyuncs.com/"+h,!0),e.send(),e.onreadystatechange=function(){4==e.readyState&&200==e.status?(l.execCommand("insertimage","https://aiyu-out.oss-cn-hongkong.aliyuncs.com/"+h),m.b.clear()):m.b.clear()}}}).catch(function(t){if(t){var e=null;(e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).open("GET","https://aiyu-out.oss-cn-hongkong.aliyuncs.com/"+h,!0),e.send(),e.onreadystatechange=function(){4==e.readyState&&200==e.status?("cover"!==l.positionImg?l.text+='<p class="img-box"><img src="https://aiyu-out.oss-cn-hongkong.aliyuncs.com/'+h+'" style="margin:0 auto;margin-top:20px;width:100%;"/></p><p class="edit-clear"> </p>':(l.firstUp=!1,l.coverUrl=h),m.b.clear()):m.b.clear()}}})},convertToBlob:function(t,e){for(var n=window.atob(t),o=n.length,i=new ArrayBuffer(o),a=new Uint8Array(i),r=0;r<o;r++)a[r]=n.charCodeAt(r);var s=null;try{s=new Blob([i],{type:e})}catch(t){var l=window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if("TypeError"===t.name&&l){var c=new l;c.append(i),s=c.getBlob(e)}}return s},onFileChange:function(t){if(this.selection=window.getSelection(),this.selection&&this.selection.rangeCount<=0)if(-1==navigator.userAgent.indexOf("Android")&&-1==navigator.userAgent.indexOf("Adr")){this.$refs.edit.focus();var e=window.getSelection();console.log(e),this.range&&(e.removeAllRanges(),e.addRange(this.range))}else this.$refs.edit.focus(),this.$refs.edit.scrollTop=this.$refs.edit.scrollHeight;var n=this,o=t.target.files;n.toast=m.b.loading({duration:0,forbidClick:!0,loadingType:"spinner",message:"上传中"}),n.getpublishId().then(function(t){return console.log(t),t&&0!=t.code?{code:-2,message:"服务端错误"}:n.getOssKey()}).then(function(t){console.log(t),t&&0==t.code&&function(){for(var e=JSON.parse(t.data),i=function(t){var i=new FileReader;console.log(o.length);var a=o[t];a.type;i.onload=function(t){if(!/\.(jpg|jpeg|png|bmp|gif|BMP|JPG|PNG|JPEG|GIF)$/.test(a.name))return alert("文件不是图片类型"),!1;console.log(o.length);t.target.result.split(",");var i="."+a.name.split(".")[1];n.get_signature(e,a,i)},i.readAsDataURL(o[t])},a=0;a<o.length;a++)i(a)}()})},changeText:function(t){if(console.log(this.selection),this.$emit("input",this.$refs.edit.innerHTML),""==this.$refs.edit.innerHTML){var e=document.createElement("p"),n=document.createElement("br");e.appendChild(n),this.$refs.edit.appendChild(e)}-1==navigator.userAgent.indexOf("Android")&&-1==navigator.userAgent.indexOf("Adr")&&(this.range=window.getSelection().getRangeAt(0),console.log(this.range)),this.onOk(!0,3)},execCommand:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;document.execCommand(t,!1,e)},focusE:function(){this.selection=window.getSelection(),console.log(this.selection.rangeCount)},blurE:function(){window.scrollTo(0,0),this.isLocked=!1},keepLastIndex:function(t){if(window.getSelection)this.selection=window.getSelection(),selection.selectAllChildren(t),console.log(selection);else if(document.selection){var e=document.selection.createRange();e.moveToElementText(t),e.collapse(!1),e.select(),console.log(22)}}},mounted:function(){var t=this;this.innerText=this.value;this.originUrl=(window.location.origin.indexOf("www"),"http://www.aiyu2019.com"),this.$nextTick(function(){document.getElementById("edit-div").innerHTML=t.value})}},b={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{width:"100%",height:"100%"}},[n("div",{ref:"edit",staticClass:"edit-div",attrs:{id:"edit-div",contenteditable:t.canEdit},on:{click:t.point,blur:t.blurE,input:t.changeText}},[t._m(0)]),t._v(" "),n("div",{staticStyle:{clear:"both"}}),t._v(" "),n("div",{staticClass:"dove-footer"},[n("div",{staticClass:"action-box"},[n("div",{staticClass:"btn-box"},[n("button",{staticClass:"up-btn",on:{click:t.uploadImg}},[n("input",{ref:"uploadinput",attrs:{type:"file",accept:"image/*",name:"imgContent",multiple:""},on:{change:t.onFileChange}})])]),t._v(" "),n("button",{staticClass:"btn-draft",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.clearCaogao(e)}}},[n("i",{staticClass:"save"})]),t._v(" "),n("button",{staticClass:"btn-draft"},[n("i",{staticClass:"caogao",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.jumpDraft(e)}}})])]),t._v(" "),n("button",{staticClass:"submit-load",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t._submitForm(e)}}},[n("p",[t._v("发表")])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("br")])}]};var y=n("VU/8")(w,b,!1,function(t){n("CepZ")},null,null).exports,S=n("mw3O"),_=n.n(S),x={name:"appLoad",data:function(){return{cdnUrl:"https://aiyu-out.oss-cn-hongkong.aliyuncs.com/",toast:"",btncount:0,filesType:"",firstUp:!0,imageUrl:"",isDisable:!1,coverUrl:"",originUrl:"http://www.aiyu2019.com",coverImg:"",title:"",positionImg:"",times:1,htmlContent:'<p style="color:rgba(175,175,175,1);">请输入正文</p>',text:"<p><br></p>",token:"",boolStyle:!0,boolStyle2:!0,contentHeight:"calc(100vh - 15.29791vw - 64.41224vw)"}},components:{vEditDiv:y},mounted:function(){var t=this,e=JSON.parse(window.localStorage.getItem("header"));e.token&&"undefined"!=e.token||m.a.alert({message:"获取用户信息错误"}).then(function(){t.returnPage()});var n=this;if(this.originUrl=(window.location.origin.indexOf("www"),"http://www.aiyu2019.com"),this.$route.query.caogao_id){var o=JSON.parse(window.localStorage.getItem("draft"));this.coverUrl=o.bgpUrl,this.title=o.title,this.detail=o.detail,this.text=o.content}else this.$fetch(n.originUrl+"/api/upload/art/draft/list").then(function(e){if(e&&0==e.code){var o=e.data.list||[];0!=o.length&&(n.coverUrl=o[0].bgpUrl,n.title=o[0].title,n.detail=o[0].detail,n.text=o[0].content,window.localStorage.setItem("draft_id",o[0].id),t.$nextTick(function(){document.getElementById("edit-div").innerHTML=o[0].content}))}})},methods:{clearMethod:function(){this.title="",this.coverUrl="",this.text="<p><br></p>"},GetRequest:function(){var t=window.location.search?window.location.search:window.location.hash;-1!=t.indexOf("#")&&(t=t.slice(2));var e=new Object;if(-1!=t.indexOf("?"))for(var n=t.substr(1).split("&"),o=0;o<n.length;o++)e[n[o].split("=")[0]]=unescape(n[o].split("=")[1]);return e},changeStyle:function(){this.boolStyle=!1,this.$refs.title.focus()},changeStylef:function(){this.boolStyle=!0,this.$refs.title.focus()},changeStyle2:function(){this.boolStyle2=!1},changeStyle2f:function(){this.boolStyle2=!0},get_signature:function(t,e,n){var o=t.accessKeyId,i=t.accessKeySecret,r=t.securityToken,s=t.expiration,l=this,c=t;console.log(c);var d={expiration:s,conditions:[["content-length-range",0,1048576e3]]},u=Base64.encode(a()(d)),p=u;console.log(p),console.log(i);var g=Crypto.HMAC(Crypto.SHA1,p,i,{asBytes:!0});console.log(g);var f=Crypto.util.bytesToBase64(g),h="img/"+l.uuid()+n,w=new FormData;w.append("name",""+e.name),w.append("key",h),w.append("OSSAccessKeyId",o),w.append("x-oss-security-token",r),w.append("policy",u),w.append("Signature",f),w.append("success_action_status","200"),w.append("file",e),v()({url:"https://aiyu-out.oss-cn-hongkong.aliyuncs.com",method:"post",data:w,headers:{"content-type":"multipart/form-data"}}).then(function(t){if(t){var e=null;(e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).open("GET","https://aiyu-out.oss-cn-hongkong.aliyuncs.com/"+h,!0),e.send(),e.onreadystatechange=function(){4==e.readyState&&200==e.status&&("cover"!==l.positionImg?l.text+='<p class="img-box"><img src="https://aiyu-out.oss-cn-hongkong.aliyuncs.com/'+h+'" style="margin:0 auto;margin-top:20px;width:100%;"/></p><p class="edit-clear"> </p>':(l.firstUp=!1,l.coverUrl=h),m.b.clear())}}}).catch(function(t){if(t){var e=null;(e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).open("GET","https://aiyu-out.oss-cn-hongkong.aliyuncs.com/"+h,!0),e.send(),e.onreadystatechange=function(){4==e.readyState&&200==e.status?("cover"!==l.positionImg?l.text+='<p class="img-box"><img src="https://aiyu-out.oss-cn-hongkong.aliyuncs.com/'+h+'" style="margin:0 auto;margin-top:20px;width:100%;"/></p><p class="edit-clear"> </p>':(l.firstUp=!1,l.coverUrl=h),m.b.clear()):m.b.clear()}}})},uuid:function(){for(var t=[],e=0;e<36;e++)t[e]="56789abcdefghijk".substr(Math.floor(16*Math.random()),1);t[14]="4",t[19]="56789abcdefghijk".substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-";var n=t.join("");return n=n.replace(/[-]/g,""),n},getpublishId:function(){var t=this,e=this;return new f.a(function(n,o){window.localStorage.getItem("publishId")?n({code:0}):t.$post(e.originUrl+"/api/upload/art/publish").then(function(t){0==t.code?(window.localStorage.setItem("publishId",t.data.id),n(t)):n(t)})})},returnPage:function(){navigator.userAgent.indexOf("Android")>-1||navigator.userAgent.indexOf("Adr")>-1?1!=this.times?window.location.href="jsbridge://www.aiyu2019.com/timeClose":window.dove.closePage():window.webkit.messageHandlers.closePage.postMessage("这是前端传值")},scanContent:function(t){this.getCursortPosition(this.$refs.framework);this.htmlContent=this.$refs.framework.innerHTML,this.setCaretPosition(this.$refs.framework,2)},getClear:function(){'<p style="color:rgba(175,175,175,1);">请输入正文</p>'===this.htmlContent&&(this.htmlContent="")},validateImageFile:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.length){var e=p()(t,1)[0];e.type.includes("image/")?this.createImage(e):this.error="Invalid Image File"}else this.error="Invalid File"},onFileChange:function(t){var e=this;this.positionImg=t.target.getAttribute("name"),this.filesType=t.target.files[0].type;var n=t.target.files[0];if(!/\.(jpg|jpeg|png|bmp|BMP|JPG|PNG|JPEG)$/.test(n.name))return alert("文件不是图片类型"),!1;e.toast=m.b.loading({duration:0,forbidClick:!0,loadingType:"spinner",message:"上传中"});var o=new FileReader;o.readAsDataURL(n),o.onload=function(t){var o=t.target.result.split(",")[1];this.imageUrl=t.target.result;"string"==typeof o&&e.convertToBlob(o,e.filesType);e.getpublishId().then(function(t){0!=t.code&&(m.a.alert({title:"服务端错误",message:t.message}),m.b.clear(),e.returnPage()),e.$post(e.originUrl+"/api/upload/pic/getSTSToken").then(function(t){if(0!=t.code)Object(m.b)({message:"上传失败",duration:1e3});else{var o=JSON.parse(t.data);console.log(o);var i="."+n.name.split(".")[1];e.get_signature(o,n,i)}})})}},dataURItoBlob:function(t){var e;if(t.split(",")[0].indexOf("base64")>=0)e=atob(t.split(",")[1]);else{e=unescape(t.split(",")[1]);for(var n=t.split(",")[0].split(":")[1].split(";")[0],o=new Uint8Array(e.length),i=0;i<e.length;i++)o[i]=e.charCodeAt(i)}return new Blob([o],{type:n})},createImage:function(t){var e=this,n=this,o=new FileReader;o.readAsDataURL(t),o.onload=function(t){var o=t.target.result.split(",")[1];e.imageUrl=t.target.result;var i="string"==typeof o?n.convertToBlob(o,n.filesType):o;e.getpublishId().then(function(t){0!=t.code&&(m.a.alert({title:"服务端错误",message:t.message}),m.b.clear(),n.returnPage()),n.$post(n.originUrl+"/api/upload/pic/getSTSToken").then(function(t){var e=JSON.parse(t.data),n=new OSS.Wrapper({accessKeyId:e.accessKeyId,accessKeySecret:e.accessKeySecret,stsToken:e.securityToken,endpoint:"http://oss-cn-shenzhen.aliyuncs.com",bucket:"imuguang-file"});console.log(e),console.log(i);var o=new FileReader;o.readAsArrayBuffer(i),o.onload=function(t){var e=new OSS.Buffer(t.target.result);n.put("img/dsd.png",e).then(function(t){console.log(t)})}})})}},upImage:function(t,e){return new f.a(function(n,o){var i=window.localStorage.getItem("publishId"),a=JSON.parse(window.localStorage.getItem("header")),r={"Content-Type":"multipart/form-data","publish-id":i},s=d()(a,r);v()({url:t,method:"post",data:e,headers:s}).then(function(t){n(t.data)},function(t){o(t)})})},removeHtmlStyle:function(t){var e="";return t&&(e=t.replace(/style="[^=>]*"([(\s+\w+=)|>])/g,"$1")),e},convertToBlob:function(t,e){for(var n=window.atob(t),o=n.length,i=new ArrayBuffer(o),a=new Uint8Array(i),r=0;r<o;r++)a[r]=n.charCodeAt(r);var s=null;try{s=new Blob([i],{type:e})}catch(t){var l=window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if("TypeError"===t.name&&l){var c=new l;c.append(i),s=c.getBlob(e)}}return s},getCursortPosition:function(t){var e=0;if(document.selection){t.focus();var n=document.selection.createRange();n.moveStart("character",-t.value.length),e=n.text.length}else(t.selectionStart||"0"==t.selectionStart)&&(e=t.selectionStart);return e},setCaretPosition:function(t,e){if(t.setSelectionRange)t.focus(),t.setSelectionRange(e,e);else if(t.createTextRange){var n=t.createTextRange();n.collapse(!0),n.moveEnd("character",e),n.moveStart("character",e),n.select()}},submitForm:function(t,e){var n=this;if("clear"!=e){this.isDisable=t;var o="/art/commit";o=1==e?"/art/commit":"/art/draft/change";var i=this;i.isDisable=!0,this.getpublishId().then(function(t){if(0!=t.code)m.a.alert({title:"服务端错误",message:t.message}),i.returnPage();else{if(1==e&&!i.title)return Object(m.b)({message:"请输入标题",duration:1e3}),void(i.isDisable=!1);if("<p> </p>"==i.text)return i.isDisable=!1,void Object(m.b)({message:"请输入内容",duration:1e3});var a=i.getDetail(i.text).substring(0,100);if(console.log(a),""==a.replace(/\s/g,""))return Object(m.b)({message:"请输入文字",duration:1e3}),void(i.isDisable=!1);3!=e&&m.b.loading({duration:100,forbidClick:!0,loadingType:"spinner",message:"发布中"});var r={bgpUrl:i.coverUrl&&""!==i.coverUrl?i.coverUrl:"bg/"+(Math.floor(5*Math.random())+1)+".jpg",title:i.title,content:i.removeHtmlStyle(i.text.replace("/<a>/g","<p>").replace("/</a>/g","</p>").replace(/\n/g,"<br/>")),detail:i.getDetail(i.text).substring(0,100)};n.$route.query.caogao_id&&1!=e&&(r.id=n.$route.query.caogao_id),window.localStorage.getItem("draft_id")&&3==e&&(r.id=window.localStorage.getItem("draft_id")),i.$post(i.originUrl+"/api/upload"+o,r).then(function(t){0==t.code&&1==e?(window.localStorage.setItem("publishId",""),window.localStorage.removeItem("draft_id"),i.times+=1,i.returnPage()):0==t.code&&3==e?(window.localStorage.setItem("publishId",""),window.localStorage.setItem("draft_id",t.data.id)):(window.localStorage.setItem("publishId",""),Object(m.b)({message:t.message,duration:1e3})),i.isDisable=!1})}})}else this.clearMethod()},getDetail:function(t){var e=new RegExp("<[^<>]+>","g"),n=t.replace(e,"");return""==n&&Object(m.b)({message:"请输入文字",duration:1e3}),n}},watch:{title:function(t,e){""==t&&""!=e||this.changeStyle()},text:function(t,e){"<p><br></p>"==t&&""!=e||""==t&&"<p><br></p>"==e||this.changeStyle2()}}},k={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"fixedClass"},[n("div",{staticStyle:{position:"relative",top:"0"}},[n("div",{staticClass:"tab-load"},[n("i",{on:{click:t.returnPage}}),t._v(" "),n("span",[t._v("编辑")]),t._v(" "),n("button",{staticClass:"submit-load",staticStyle:{visibility:"hidden"},attrs:{disabled:t.isDisable}},[n("p",[t._v("发表")])])]),t._v(" "),n("div",{staticClass:"dove-cover"},[t.coverUrl?n("img",{attrs:{src:t.cdnUrl+t.coverUrl+"?x-oss-process=image/resize,w_375,h_300,m_fill",crossorigin:"anonymous","data-src":t.coverUrl}}):t._e(),t._v(" "),n("label",{staticClass:"cover-btn button is-danger",class:{active:!t.firstUp}},[t._v("\n          选择封面\n          "),n("input",{attrs:{type:"file",accept:"image/*",name:"cover"},on:{change:t.onFileChange}})])]),t._v(" "),n("p",{staticClass:"dove-title",on:{click:t.changeStyle}},[n("span",{class:{active:!t.boolStyle}},[t._v("请输入标题")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],ref:"title",attrs:{type:"text",maxlength:"35"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})])])]),t._v(" "),n("div",{staticClass:"dove-content",style:{height:t.contentHeight},on:{click:t.changeStyle2}},[n("span",{class:{active:!t.boolStyle2}},[t._v("请输入正文")]),t._v(" "),n("v-edit-div",{attrs:{"on-ok":t.submitForm,isdisable:t.isDisable},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1)])},staticRenderFns:[]};var C=n("VU/8")(x,k,!1,function(t){n("o8uD")},null,null).exports,I={name:"App",data:function(){return{pro:!1}},components:{vEditDiv:y,loginUser:l,appLoad:C},methods:{success:function(t){console.log(t),this.pro=t}},mounted:function(){}},T={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var U=n("VU/8")(I,T,!1,function(t){n("z8b1")},null,null).exports,A=n("/ocq"),O={name:"DraftBox",data:function(){return{originUrl:"http://www.aiyu2019.com/api",draft_list:[]}},mounted:function(){var t=this;this.originUrl=(window.location.origin.indexOf("www"),"http://www.aiyu2019.com/api"),this.$fetch(t.originUrl+"/upload/art/draft/list").then(function(e){e&&0==e.code?t.draft_list=e.data.list:t.draft_list=[]})},methods:{jumpEditor:function(t){window.localStorage.setItem("draft",a()(t)),window.localStorage.setItem("draft_id",t.id),this.$router.push({path:"/appload",query:{caogao_id:t.id}})},returnPage:function(){this.$router.back()},removeDraft:function(t){console.log(t);var e=this,n={ids:t.id};this.$post(e.originUrl+"/upload/art/draft/del",n).then(function(t){console.log(t),t&&0==t.code&&e.getList()})},getList:function(){var t=this;this.$fetch(t.originUrl+"/upload/art/draft/list").then(function(e){e&&0==e.code?t.draft_list=e.data.list:t.draft_list=[]})}}},$={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticStyle:{position:"relative",top:"0"}},[n("div",{staticClass:"tab-load"},[n("i",{on:{click:t.returnPage}}),t._v(" "),n("span",[t._v("草稿箱")]),t._v(" "),t._m(0)])]),t._v(" "),n("div",{staticClass:"scroll-container"},[n("ul",{staticClass:"draft_container"},t._l(t.draft_list,function(e,o){return n("li",{key:o,on:{click:function(n){return t.jumpEditor(e)}}},[n("div",{staticClass:"draft_title"},[t._v("\n            "+t._s(e.title)+"\n        ")]),t._v(" "),n("div",{staticClass:"draft_time"},[t._v("\n            "+t._s(e.createDate?e.createDate:"08-19 04:45")+"\n        ")]),t._v(" "),n("div",{staticClass:"draft_detail"},[t._v("\n            "+t._s(e.detail?e.detail:"暂无介绍")+"\n        ")]),t._v(" "),n("div",{staticClass:"draft_action"},[n("span",{on:{click:function(n){return n.stopPropagation(),n.preventDefault(),t.jumpEditor(e)}}},[t._v("编辑")]),t._v(" "),n("span",{staticClass:"draft_remove",on:{click:function(n){return n.stopPropagation(),n.preventDefault(),t.removeDraft(e)}}},[t._v("删除")])])])}),0)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"submit-load",staticStyle:{visibility:"hidden"}},[e("p",[this._v("发表")])])}]};var B=n("VU/8")(O,$,!1,function(t){n("0Apa")},null,null).exports;o.a.use(A.a);var M=new A.a({routes:[{path:"/",redirect:"/appload"},{path:"/draftbox",name:"DraftBox",component:B},{path:"/appload",name:"appLoad",component:C}]}),P=n("kx9P"),R=n.n(P),D=(window.location.origin.indexOf("www"),"http://www.aiyu2019.com");v.a.defaults.timeout=5e3,v.a.defaults.baseURL=D+"/api/user",v.a.defaults.transformResponse=function(t){return R.a.parse(t)},v.a.interceptors.request.use(function(t){var e=JSON.parse(window.localStorage.getItem("header")),n=window.localStorage.getItem("publishId"),o={"Content-Type":"application/x-www-form-urlencoded"};return window.localStorage.getItem("header")?t.headers=d()(e,o):t.headers=o,console.log(t.headers),n&&(t.headers["publish-id"]=n),t},function(t){return f.a.reject(err)}),v.a.interceptors.response.use(function(t){return console.log(t),2==t.data.errCode&&router.push({path:"/login",querry:{redirect:router.currentRoute.fullPath}}),t},function(t){return t});n("4ml/");o.a.use(m.c),o.a.config.productionTip=!1,o.a.prototype.$post=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new f.a(function(n,o){v.a.post(t,_.a.stringify(e)).then(function(t){console.log(t.data),n(t.data)},function(t){o(t)})})},o.a.prototype.$fetch=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new f.a(function(n,o){v.a.get(t,{params:e}).then(function(t){n(t.data)}).catch(function(t){o(t)})})},o.a.prototype.$patch=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new f.a(function(n,o){v.a.patch(t,e).then(function(t){n(t.data)},function(t){o(t)})})},o.a.prototype.$put=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new f.a(function(n,o){v.a.put(t,e).then(function(t){n(t.data)},function(t){o(t)})})},new o.a({el:"#app",router:M,components:{App:U},template:"<App/>"})},o8uD:function(t,e){},z8b1:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.07213f818289829f68fb.js.map